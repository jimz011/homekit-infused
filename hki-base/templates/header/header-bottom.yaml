# lovelace_gen
type: horizontal-stack
cards:
  - type: 'custom:button-card'
    color_type: blank-card
    styles:
      card:
        - width: 0px
        - height: 43px
  - type: custom:swipe-card
    parameters:
      allowTouchMove: true
      grabCursor: true
      autoplay:
        disableOnInteraction: false
    cards:
      - type: custom:button-card
        style: |
          ha-card {
            margin-top: -5px;
          }
        name: "{{ subtitle|default('undefined') }}"
        icon: "{{ icon|default('mdi:home') }}"
        size: 100%
        entity: {{ entity|default('input_boolean.dummy1') }}
        layout: icon_name
        show_state: false
        show_label: false
        double_tap_action: 
          action: navigate
          navigation_path: /homekit-infused/ha_settings
          haptic: light
        tap_action: 
          action: more-info
          haptic: heavy
        styles:
          card:
            - --ha-card-background: rgba(0,0,0,0.0)
            - box-shadow: none
            - height: 45px
            - width: 350px
          name:
            - font-size: var(--subtitle-font-size)
            - font-family: var(--font-family)
            - color: var(--subtitle-text-color)
            - justify-self: start
            - font-weight: var(--subtitle-font-weight)
          grid: 
            - grid-template-areas: '"i n"'
            - grid-template-columns: 8% 1fr
            - grid-template-rows: 1fr
          icon:
            - color: var(--subtitle-text-color)
            - padding-bottom: 3px
        state:
          - value: "off"
            spin: {{ spin|default('false') }}
  {% if (_global.general_config.alarm.show == 'true') %}
  - type: custom:button-card
    icon: "[[[ if (states['{{ _global.general_config.alarm.entity|default('alarm_control_panel.home_alarm') }}'].state == 'disarmed') return 'mdi:lock-open'; else return 'mdi:lock-alert'; ]]]"
    size: 75%
    color: auto
    show_name: false
    show_state: false
    show_label: false
    hold_action:
      action: none
    tap_action:
      action: fire-dom-event
      browser_mod:
        command: call-service
        service: browser_mod.popup
        service_data:
          title: ' '
          deviceID:
            - this
          style:
            .: |
              :host {
                --mdc-theme-surface: rgba(0,0,0,0);
                --secondary-background-color: rgba(0,0,0,0);
                --ha-card-background: rgba(0,0,0,0);
                --mdc-dialog-scrim-color: rgba(0,0,0,0.9);
                --mdc-dialog-min-height: 100%;
                --mdc-dialog-min-width: 100%;
                --mdc-dialog-max-width: 100%;
                --paper-slider-knob-color: #FFFFFF !important;
                --paper-slider-active-color: #dedede !important;
                --switch-checked-button-color: #FFFFFF !important;
                --switch-unchecked-button-color: #FFFFFF !important;
                --switch-checked-track-color: green !important;
                --switch-unchecked-track-color: red !important;
              }
              app-header, app-toolbar {
                background-color: rgba(0,0,0,0.0) !important;
              }
              mwc-icon-button {
                color: #FFF;
              }
          card:
            type: vertical-stack
            cards:
              {% if (_global.general_config.alarm.type == 'keypad') %}
              - type: alarm-panel
                style: |
                  ha-card {
                    border-radius: var(--border-radius);
                    box-shadow: none !important;
                    margin-left: 7px;
                    margin-right: 7px;
                    --ha-card-background: var(--ha-card-background);
                  }
                entity: {{ _global.general_config.alarm.entity|default('alarm_control_panel.home_alarm') }}
              {% elif (_global.general_config.alarm.type == 'toggles') %}
              - type: custom:button-card
                icon: mdi:lock-open-outline
                name: Disarm
                confirmation:
                  text: Are you sure you want to disarm the alarm?
                layout: icon_name_state
                size: 50%
                tap_action:
                  action: call-service
                  service: alarm_control_panel.alarm_disarm
                  service_data:
                    entity_id: {{ _global.general_config.alarm.entity|default('alarm_control_panel.home_alarm') }}
                    code: !secret alarm_code
                  haptic: light
                hold_action:
                  action: none
                styles:
                  card:
                    - opacity: 0.7
                    - border-radius: var(--border-radius)
                    - box-shadow: var(--box-shadow)
                    - height: 65px
                    - --ha-card-background: "[[[ if (states['{{ _global.general_config.alarm.entity|default('alarm_control_panel.home_alarm') }}'].state == 'disarmed') return 'white'; else return 'var(--ha-card-background)' ]]]"
                  name:
                    - color: "[[[ if (states['{{ _global.general_config.alarm.entity|default('alarm_control_panel.home_alarm') }}'].state == 'disarmed') return 'black'; else return 'var(--primary-text-color)' ]]]"
                  icon:
                    - color: "[[[ if (states['{{ _global.general_config.alarm.entity|default('alarm_control_panel.home_alarm') }}'].state == 'disarmed') return 'LimeGreen'; else return 'var(--paper-card-icon-color)' ]]]"
                    - animation: "[[[ if (states['{{ _global.general_config.alarm.entity|default('alarm_control_panel.home_alarm') }}'].state == 'disarmed') return 'blink 2s ease infinite' ]]]"
              - type: custom:button-card
                icon: mdi:lock-outline
                name: Arm Home
                confirmation:
                  text: Are you sure you want to arm the alarm for Home?
                layout: icon_name_state
                size: 50%
                tap_action:
                  action: call-service
                  service: alarm_control_panel.alarm_arm_home
                  service_data:
                    entity_id: {{ _global.general_config.alarm.entity|default('alarm_control_panel.home_alarm') }}
                    code: !secret alarm_code
                  haptic: light
                hold_action:
                  action: none
                styles:
                  card:
                    - opacity: 0.7
                    - border-radius: var(--border-radius)
                    - box-shadow: var(--box-shadow)
                    - height: 65px
                    - --ha-card-background: "[[[ if (states['{{ _global.general_config.alarm.entity|default('alarm_control_panel.home_alarm') }}'].state == 'armed_home') return 'white'; else return 'var(--ha-card-background)' ]]]"
                  name:
                    - color: "[[[ if (states['{{ _global.general_config.alarm.entity|default('alarm_control_panel.home_alarm') }}'].state == 'armed_home') return 'black'; else return 'var(--primary-text-color)' ]]]"
                  icon:
                    - color: "[[[ if (states['{{ _global.general_config.alarm.entity|default('alarm_control_panel.home_alarm') }}'].state == 'armed_home') return 'Orange'; else return 'var(--paper-card-icon-color)' ]]]"
                    - animation: "[[[ if (states['{{ _global.general_config.alarm.entity|default('alarm_control_panel.home_alarm') }}'].state == 'armed_home') return 'blink 2s ease infinite' ]]]"
              - type: custom:button-card
                icon: mdi:lock-outline
                name: Arm Away
                confirmation:
                  text: Are you sure you want to arm the alarm for Away?
                layout: icon_name_state
                size: 50%
                tap_action:
                  action: call-service
                  service: alarm_control_panel.alarm_arm_away
                  service_data:
                    entity_id: {{ _global.general_config.alarm.entity|default('alarm_control_panel.home_alarm') }}
                    code: !secret alarm_code
                  haptic: light
                hold_action:
                  action: none
                styles:
                  card:
                    - opacity: 0.7
                    - border-radius: var(--border-radius)
                    - box-shadow: var(--box-shadow)
                    - height: 65px
                    - --ha-card-background: "[[[ if (states['{{ _global.general_config.alarm.entity|default('alarm_control_panel.home_alarm') }}'].state == 'armed_away') return 'white'; else return 'var(--ha-card-background)' ]]]"
                  name:
                    - color: "[[[ if (states['{{ _global.general_config.alarm.entity|default('alarm_control_panel.home_alarm') }}'].state == 'armed_away') return 'black'; else return 'var(--primary-text-color)' ]]]"
                  icon:
                    - color: "[[[ if (states['{{ _global.general_config.alarm.entity|default('alarm_control_panel.home_alarm') }}'].state == 'armed_away') return 'DarkRed'; else return 'var(--paper-card-icon-color)' ]]]"
                    - animation: "[[[ if (states['{{ _global.general_config.alarm.entity|default('alarm_control_panel.home_alarm') }}'].state == 'armed_away') return 'blink 2s ease infinite' ]]]"
              {% endif %}
      haptics: light
    styles:
      card:
        - --ha-card-background: var(--header-text-color)
        - border-radius: 50%
        - box-shadow: none
        - width: 30px
        - height: 30px
      img_cell:
        - align-self: start
        - text-align: start
      icon:
        - color: "[[[ if (states['{{ _global.general_config.alarm.entity|default('alarm_control_panel.home_alarm') }}'].state == 'disarmed') return 'LimeGreen'; if (states['{{ _global.general_config.alarm.entity|default('alarm_control_panel.home_alarm') }}'].state == 'armed_home') return 'Orange'; else return 'DarkRed'; ]]]"
  {% endif %}
  - !include ../../includes/gap.yaml 
  - !include ../../includes/gap.yaml